<script>

	/*
		The code inside this script tag is responsible for validating the user input on the Bid input text field.
	*/

	$(document).ready(function(){
		$(".is_f").change(function(){
			var n = $(this).val();
			$(this).val("");

			var to_f = "";
			var has_dot = false;
			var decimals = 0;

			for (var i = 0; i < n.length; i++)
			{
				if ((n.charAt(i) >= 48 || n.charAt(i) <= 57) && decimals === 0) to_f += n[i];
				else if ((n.charAt(i) >= 48 || n.charAt(i) <= 57) && decimals > 0 && decimals <= 2)
				{
					to_f += n[i];
					decimals++;
				}
				else if ((n.charAt(i) === '.' || n.charAt(i) === ',') && has_dot === false)
				{
					to_f += ".";
					has_dot = true;
					decimals = 1;
				}
			}

			if (decimals === 1) to_f = to_f.substring(0,to_f.length-1);
			else if (decimals === 2) to_f += "0";

			$(this).val(to_f);
		});
	});
</script>


<div id="creative">
	<div class="nested-fields">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 style="display:inline" class="panel-title">Creative</h3>
				<%= link_to_remove_association "Remove", f, :class => 'btn btn-danger btn-xs'%>
			</div>
			<div class="panel-body">
				
					<div class="col-sm-12" style="margin-bottom: 10px">
						<div class="field">
							<div class="col-sm-4">
							<%= f.label :bid %>
							</div>
							<div class="col-sm-8">
							<%= f.text_field :bid, class: 'form-control is_f'%>
							</div>
						</div>
					</div>
					<div class="col-sm-12">
						<div class="field">
							<div class="col-sm-4"><%= f.label :adtext %></div>
							<div class="col-sm-8"><%= f.text_area :adtext, class: 'form-control' %></div>
							<br>
						</div>
					</div>
			</div>
		</div>
	</div>
</div>